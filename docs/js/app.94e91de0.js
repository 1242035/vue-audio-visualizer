webpackJsonp([1],{"+VGo":function(t,s){},0:function(t,s,e){t.exports=e("NHnr")},"0v1e":function(t,s){},"E/qW":function(t,s){},IqFA:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("/5sW"),n=(e("TFWu"),{name:"CanvasSettings",data:function(){return{showMenu:!1,showSettings:!0}},mounted:function(){window.addEventListener("keydown",this.checkKeys)},beforeDestroy:function(){window.removeEventListener("keydown",this.checkKeys)},methods:{checkKeys:function(t){switch(t.keyCode){case 72:this.showSettings=!this.showSettings;break;case 32:case 75:this.$emit("pauseSong");break;case 39:this.$emit("nextSong");break;case 37:this.$emit("prevSong");break;case 40:this.$emit("lowerVolume");break;case 38:this.$emit("raiseVolume");break;case 83:this.showMenu=!this.showMenu;break;case 27:console.log("closing canvas"),this.$emit("showCanvas");break}}}}),a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.showSettings?e("div",{staticClass:"canvas-settings"},[e("div",{staticClass:"canvas-cogs"},[t.showMenu?e("span",[t._v("Press 'H' / 'S' To Toggle Settings")]):e("span"),t.showMenu?t._e():e("i",{staticClass:"fa fa-cog fa-lg",on:{click:function(s){t.showMenu=!0}}}),t.showMenu?e("i",{staticClass:"fa fa-close fa-lg",on:{click:function(s){t.showMenu=!1}}}):t._e()]),t.showMenu?e("ul",{staticClass:"canvas-menu"},[t._m(0),e("li",[t._v("This is the settings content")]),e("li",[t._v("This is the settings content")]),e("li",[t._v("This is the settings content")]),e("li",[t._v("This is the settings content")])]):t._e()]):t._e()},o=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[e("span",{staticClass:"dropdown"},[t._v("Visualizer")]),e("div",{staticClass:"dropdown-options"},[e("span",[t._v("Option 1")]),e("span",[t._v("Option 2")]),e("span",[t._v("Option 3")])])])}],l=e("XyMi");function r(t){e("XVlK")}var u=!1,c=r,h=null,g=null,m=Object(l["a"])(n,a,o,u,c,h,g),d=m.exports,f={name:"AvCanvas",components:{CanvasSettings:d},props:{audioAnalyser:{type:AnalyserNode,default:null}},data:function(){return{myCanvas:null,myCtx:null}},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},mounted:function(){window.addEventListener("resize",this.handleResize),this.myCanvas=this.$refs.canvas,this.myCtx=this.myCanvas.getContext("2d"),this.myCanvas.width=this.myCanvas.parentElement.getBoundingClientRect().width,this.myCanvas.height=this.myCanvas.parentElement.getBoundingClientRect().height,this.mainLoop()},methods:{handleResize:function(t){this.myCanvas.width=this.myCanvas.parentElement.getBoundingClientRect().width,this.myCanvas.height=this.myCanvas.parentElement.getBoundingClientRect().height},mainLoop:function(){var t=this,s=this.audioAnalyser.frequencyBinCount,e=this.audioAnalyser.fftSize,i=new Uint8Array(s),n=new Uint8Array(e),a=64,o=4,l=Math.round(.85*s/a),r=0,u=this.myCanvas.width/a;this.audioAnalyser.getByteFrequencyData(i),this.audioAnalyser.getByteTimeDomainData(n),this._fillCanvasBG(),i.forEach(function(s,e){if(!(e%l)){var n=Math.round(i.slice(e,e+l).reduce(function(t,s){return s+t},0)/l),a=n/255*t.myCanvas.height;t._drawBars(r,a,u),r+=u+o}}),requestAnimationFrame(this.mainLoop)},_fillCanvasBG:function(){var t=this.myCanvas.width,s=this.myCanvas.height;this.myCtx.fillStyle="black",this.myCtx.fillRect(0,0,t,s)},_drawBars:function(t,s,e){this.myCtx.fillStyle="white";var i=this.myCanvas.height-s;this.myCtx.fillRect(t,i,e,s)}}},v=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"av__visualizer"},[e("canvas-settings",{on:{pauseSong:function(s){t.$emit("pauseSong")},prevSong:function(s){t.$emit("prevSong")},nextSong:function(s){t.$emit("nextSong")},lowerVolume:function(s){t.$emit("lowerVolume")},raiseVolume:function(s){t.$emit("raiseVolume")},showCanvas:function(s){t.$emit("showCanvas")}}}),e("canvas",{ref:"canvas"})],1)},p=[];function y(t){e("E/qW")}var _=!1,S=y,C="data-v-1f638444",w=null,A=Object(l["a"])(f,v,p,_,S,C,w),V=A.exports,P={name:"AudioControls",props:["isShuffling","repeatVal","songControls"],watch:{"songControls.songPercent":{handler:function(t,s){this.$refs.progressBar.style.width=(100*t).toString()+"%"}}}},x=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"av__audio__playback"},[e("div",{staticClass:"audio__controls"},[e("div",{staticClass:"audio__controls__controls"},[e("i",{staticClass:"fa fa-random",on:{click:function(s){t.$emit("toggleShuffle")}}}),e("i",{staticClass:"fa fa-step-backward",on:{click:function(s){t.$emit("prevSong")}}}),t.songControls.songPaused?e("i",{staticClass:"fa fa-play-circle fa-2x",on:{click:function(s){t.$emit("evalSong")}}}):e("i",{staticClass:"fa fa-pause-circle fa-2x",on:{click:function(s){t.$emit("evalSong")}}}),e("i",{staticClass:"fa fa-step-forward",on:{click:function(s){t.$emit("nextSong")}}}),e("i",{staticClass:"fa fa-repeat",on:{click:function(s){t.$emit("toggleRepeat")}}})]),e("div",{staticClass:"audio__controls__progress "},[e("div",{staticClass:"audio__controls__progress__currentTime"},[t._v(t._s(t.songControls.songTime))]),e("div",{staticClass:"audio__controls__progress__bar"},[e("div",{ref:"progressBar",staticClass:"audio__controls__progress__bar__percent"})]),e("div",{staticClass:"audio__controls__progress__songDuration"},[t._v(t._s(t.songControls.songDuration))])])])])},b=[];function k(t){e("0v1e")}var $=!1,B=k,T="data-v-534ac308",M=null,N=Object(l["a"])(P,x,b,$,B,T,M),E=N.exports,L={name:"AudioPlaylist",props:["playlist"]},D=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"slide-fade"}},[e("div",{staticClass:"audio__playlist"},[e("span",[e("span",{staticClass:"songNum"}),e("span",{staticClass:"songName"},[e("b",[t._v("SONG")])]),e("span",{staticClass:"songDuration"},[e("i",{staticClass:"fa fa-clock-o"})])]),t._l(t.playlist,function(s,i){return e("span",{key:i},[e("span",{staticClass:"songNum",on:{click:function(s){t.$emit("chooseSong",i)}}},[s.isPlaying?e("span",[e("i",{staticClass:"fa fa-pause fa-xs"})]):e("span",[t._v(t._s(i+1))])]),e("span",{staticClass:"songName",on:{click:function(s){t.$emit("chooseSong",i)}}},[t._v(t._s(s.songName))]),e("span",{staticClass:"songDuration"},[t._v(t._s(s.songDuration))])])})],2)])},z=[];function R(t){e("XRg8")}var j=!1,O=R,F="data-v-9cc85be8",q=null,I=Object(l["a"])(L,D,z,j,O,F,q),K=I.exports;function G(t,s){return(t%s+s)%s}function H(t){var s,e,i=t.length;while(0!==i)e=Math.floor(Math.random()*i),i-=1,s=t[i],t[i]=t[e],t[e]=s;return t}function X(t){return(t<10?"0":"")+t}var U={name:"AudioVisualizer",mounted:function(){this.myAudioPlayer=this.$refs.myAudio,this.volume.volumeBar=this.$refs.volumeBar,this.volume.volumeLeft=this.$refs.volumeLeft,this.setAnalyser(),this.updateVolumeBar()},props:{avHeight:{type:String,default:"72px"},canvas:{type:Boolean,default:!1},playlist:{type:Array,default:null}},components:{AvCanvas:V,AudioControls:E,AudioPlaylist:K},data:function(){return{myAudioPlayer:null,volumeBar:null,myAnalyser:null,currentSong:0,isShuffling:!1,repeatVal:0,isShowing:{playlist:!1,showVis:!1},songControls:{songPercent:0,songTime:"",songDuration:"",songPaused:!0},volume:{volumeBar:null,volumeLeft:null},togglers:{showVolumeSlider:!1}}},computed:{computedPlaylist:function(){return this.isShuffling?H(this.playlist):this.playlist}},methods:{showCanvas:function(){this.isShowing.showVis=!this.isShowing.showVis,this.isShowing.showVis?this.$refs.av.style.height="100%":this.$refs.av.style.height="auto"},evalSong:function(){this.myAudioPlayer.paused?this.playSong():this.pauseSong()},chooseSong:function(t){this.currentSong!==t?(i["a"].set(this.playlist[this.currentSong],"isPlaying",!1),this.currentSong=t,this.myAudioPlayer.currentTime=0,this.playSong()):this.currentSong===t&&this.songControls.songPaused?this.playSong():this.pauseSong()},playSong:function(){setTimeout(function(){this.myAudioPlayer.play(),this.songControls.songPaused=!1,i["a"].set(this.playlist[this.currentSong],"isPlaying",!0)}.bind(this),150)},pauseSong:function(){setTimeout(function(){this.myAudioPlayer.pause(),this.songControls.songPaused=!0,i["a"].set(this.playlist[this.currentSong],"isPlaying",!1)}.bind(this),150)},nextSong:function(){i["a"].set(this.playlist[this.currentSong],"isPlaying",!1),this.currentSong=(this.currentSong+1)%this.playlist.length,this.myAudioPlayer.currentTime=0,this.playSong()},prevSong:function(){this.myAudioPlayer.currentTime<2&&(i["a"].set(this.playlist[this.currentSong],"isPlaying",!1),this.currentSong=G(this.currentSong-1,this.playlist.length),i["a"].set(this.playlist[this.currentSong],"isPlaying",!1)),this.myAudioPlayer.currentTime=0,this.playSong()},lowerVolume:function(){this.myAudioPlayer.volume-.05<0?this.myAudioPlayer.volume=0:this.myAudioPlayer.volume-=.05,this.updateVolumeBar()},raiseVolume:function(){this.myAudioPlayer.volume+.05>1?this.myAudioPlayer.volume=1:this.myAudioPlayer.volume+=.05,this.updateVolumeBar()},updateVolumeBar:function(){this.cleanVolumeLeft(100*this.myAudioPlayer.volume),this.volume.volumeBar.value=100*this.myAudioPlayer.volume},slideVolume:function(t){var s=t.target.value;this.cleanVolumeLeft(s),this.setVolume(s/100)},setVolume:function(t){this.myAudioPlayer.volume=t,this.volume.volumeLeft.style.display="block",0===t&&(this.volume.volumeLeft.style.display="none",this.volume.volumeLeft.style.width="0%")},cleanVolumeLeft:function(t){this.volume.volumeLeft.style.width=t>75?(t-6).toString()+"%":t>50?(t-3.5).toString()+"%":t>25?(t-3).toString()+"%":t>10?(t-2).toString()+"%":(t-1.5).toString()+"%"},toggleShuffle:function(){this.isShuffling=!this.isShuffling},toggleRepeat:function(){this.repeatVal=G(this.repeatVal+1,3)},onTimeUpdateListener:function(){var t=this.myAudioPlayer.currentTime,s=this.myAudioPlayer.duration,e=t/s;isNaN(e)?this.songControls.songPercent=0:(this.songControls.songPercent=e,this.songControls.songTime=Math.floor(t.toFixed(0)/60)+":"+(t.toFixed(0)%60?X(t.toFixed(0)%60):"00"),this.songControls.songDuration=Math.floor(s.toFixed(0)/60)+":"+(s.toFixed(0)%60?X(s.toFixed(0)%60):"00"))},handleSongEnd:function(){switch(this.repeatVal){case 0:this.currentSong+1===this.playlist.length?this.currentSong=0:this.nextSong();break;case 1:this.myAudioPlayer.currentTime=0,this.playSong();break;case 2:this.nextSong();break}},setAnalyser:function(){var t=new AudioContext,s=t.createMediaElementSource(this.myAudioPlayer);t.crossOrigin="anonymous",this.myAudioPlayer.crossOrigin="anonymous",this.myAnalyser=t.createAnalyser(),s.connect(this.myAnalyser),this.myAnalyser.fftSize=32768,this.myAnalyser.connect(t.destination)}}},W=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{style:{"--av-height":t.avHeight}},[t.playlist?e("div",{ref:"av",staticClass:"av"},[t.isShowing.showVis?e("av-canvas",{attrs:{audioAnalyser:t.myAnalyser},on:{pauseSong:t.evalSong,prevSong:t.prevSong,nextSong:t.nextSong,lowerVolume:t.lowerVolume,raiseVolume:t.raiseVolume}}):t._e(),e("div",{staticClass:"av__audio"},[e("div",{staticClass:"av__audio__meta"},[e("div",{staticClass:"av__audio__meta__img"},[e("img",{attrs:{src:t.computedPlaylist[t.currentSong].songImg,alt:""}})]),e("div",{staticClass:"av__audio__meta__tags"},[e("span",{staticClass:"av__audio__meta__tags__title"},[t._v(t._s(t.computedPlaylist[t.currentSong].songName))]),e("span",{staticClass:"av__audio__meta__tags__artist"},[t._v(t._s(t.computedPlaylist[t.currentSong].artistName))])])]),e("audio-controls",{attrs:{repeatVal:t.repeatVal,isShuffling:t.isShuffling,songControls:t.songControls},on:{evalSong:t.evalSong,nextSong:t.nextSong,prevSong:t.prevSong,toggleShuffle:t.toggleShuffle,toggleRepeat:t.toggleRepeat}}),e("div",{staticClass:"av__audio__togglers"},[e("div",{staticClass:"av__audio__togglers__volume"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.togglers.showVolumeSlider,expression:"togglers.showVolumeSlider"}],staticClass:"av__audio__togglers__volume__hover",on:{mouseover:function(s){t.togglers.showVolumeSlider=!0},mouseout:function(s){t.togglers.showVolumeSlider=!1}}},[e("i",{staticClass:"fa fa-volume-off"}),e("div",[e("input",{ref:"volumeBar",staticClass:"volume-slider",attrs:{type:"range",min:"0",max:"100"},on:{input:t.slideVolume}}),e("span",{ref:"volumeLeft"})])]),e("i",{staticClass:"fa fa-volume-up",attrs:{"aria-hidden":"true"},on:{mouseover:function(s){t.togglers.showVolumeSlider=!0},mouseout:function(s){t.togglers.showVolumeSlider=!1}}})]),e("i",{staticClass:"fa fa-list-ol",class:{"active-fa":t.isShowing.playlist},attrs:{"aria-hidden":"true"},on:{click:function(s){t.isShowing.playlist=!t.isShowing.playlist}}}),t.canvas?e("i",{staticClass:"fa fa-signal",class:{"active-fa":t.isShowing.showVis},attrs:{"aria-hidden":"true"},on:{click:t.showCanvas}}):t._e()]),e("audio",{ref:"myAudio",attrs:{src:t.computedPlaylist[t.currentSong].songSrc,type:"audio/mp3"},on:{timeupdate:t.onTimeUpdateListener,ended:t.handleSongEnd}})],1)],1):t._e(),t.isShowing.playlist?e("audio-playlist",{attrs:{playlist:t.playlist},on:{chooseSong:t.chooseSong}}):t._e()],1)},J=[];function Y(t){e("IqFA")}var Q=!1,Z=Y,tt=null,st=null,et=Object(l["a"])(U,W,J,Q,Z,tt,st),it=et.exports,nt={components:{AudioVisualizer:it},data:function(){return{playlist:[{songName:"Agnes",songSrc:"static/agnes.mp3",artistName:"Glass Animals",songImg:"https://pbs.twimg.com/profile_images/765322021060354048/0ppD4P6Y_400x400.jpg",songDuration:"3:55"},{songName:"TaKillya (Baby Driver Soundtrack)",songSrc:"static/takillya.mp3",artistName:"Vinnie Maniscalco",songImg:"https://adamology.net/wp-content/uploads/2017/07/Baby-Driver.jpg",songDuration:"3:46"},{songName:"Kipod",songSrc:"static/kipod.mp3",artistName:"Infected Mushrrom",songImg:"https://is4-ssl.mzstatic.com/image/thumb/Music/45/71/ff/mzi.mtqdovgf.jpg/1200x630bb.jpg",songDuration:"5:48"},{songName:"Spitfire",songSrc:"static/spitfire.mp3",artistName:"Infected Mushrrom",songImg:"https://is4-ssl.mzstatic.com/image/thumb/Music/45/71/ff/mzi.mtqdovgf.jpg/1200x630bb.jpg",songDuration:"7:15"}]}}},at=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"content"},[t._v("\n    This is the main content\n  ")]),e("audio-visualizer",{attrs:{avHeight:"82px",playlist:t.playlist,canvas:!0}})],1)},ot=[];function lt(t){e("+VGo")}var rt=!1,ut=lt,ct=null,ht=null,gt=Object(l["a"])(nt,at,ot,rt,ut,ct,ht),mt=gt.exports;new i["a"]({render:function(t){return t(mt)}}).$mount("#app")},XRg8:function(t,s){},XVlK:function(t,s){}},[0]);
//# sourceMappingURL=app.94e91de0.js.map